<form
  #newActivityForm="ngForm"
  novalidate
  [validated]="validated"
  (ngSubmit)="onSubmit(newActivityForm)"
  cForm>
  <label>Time</label>
  <c-input-group class="mb-2 has-validation">
    <input
      [(ngModel)]="newActivity.time"
      name="time"
      required
      cFormControl
      [max]="getTimeMax()"
      type="datetime-local"/>
    <c-form-feedback [valid]="false">Time is required!</c-form-feedback>
  </c-input-group>
  <label>Application</label>
  <c-input-group class="mb-2 has-validation">
    <select
      [(ngModel)]="newActivity.applicationId"
      name="application"
      required
      cSelect>
      <option *ngFor="let app of applications" [value]="app.id">{{app.name}}</option>
    </select>
    <c-form-feedback [valid]="false">Application is required!</c-form-feedback>
  </c-input-group>
  <label>File</label>
  <c-input-group class="mb-2 has-validation">
    <input
      (change)="onFileSelected($event)"
      required
      cFormControl
      accept="application/json"
      type="file"/>
    <c-form-feedback [valid]="false">File is required!</c-form-feedback>
  </c-input-group>
  <label>Anonymous</label>
  <c-input-group class="mb-2 has-validation">
    <c-form-check [switch]="true">
      <input cFormCheckInput [(ngModel)]="newActivity.anonymous" name="anonymous" [checked]="isAnonymous()" type="checkbox" />
    </c-form-check>
  </c-input-group>
  <ng-container *ngIf="!newActivity.anonymous">
    <label>Participant</label>
    <c-input-group class="mb-2 has-validation">
      <select
        [(ngModel)]="newActivity.participantId"
        name="Participant"
        required
        cSelect>
        <option *ngFor="let part of participants" [value]="part.id">{{part.nickname}}</option>
      </select>
      <c-form-feedback [valid]="false">Application is required!</c-form-feedback>
    </c-input-group>
  </ng-container>
  <label>Notes <span class="text-muted small">(Optional)</span></label>
  <c-input-group class="mb-2 has-validation">
        <textarea
          [(ngModel)]="newActivity.notes"
          name="notes"
          cFormControl>
        </textarea>
  </c-input-group>
</form>
